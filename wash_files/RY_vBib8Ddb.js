if (self.CavalryLogger) { CavalryLogger.start_js(["Z0DGh"]); }

__d('ArtillerySWDataCollector',['Promise','ClientServiceWorkerMessage','pageLoadedViaSWCache'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={collect:function j(){return new (c('Promise'))(function(k,l){if(!c('pageLoadedViaSWCache')()){k();return;}var m=false,n=new (c('ClientServiceWorkerMessage'))('asw-pageTraceDataRequest',null,function(o){var p=o.data,q=p.command,r=p.data;if(m)return;m=true;if(q==='trace'&&r.traceData){h=r.traceData;k(r.traceData);return;}k(h);});n.sendViaController();});}};f.exports=i;}),null);
__d('ServiceWorkerExperimentPerfTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:ServiceWorkerExperimentPerfLoggerConfig',this.$ServiceWorkerExperimentPerfTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:ServiceWorkerExperimentPerfLoggerConfig',this.$ServiceWorkerExperimentPerfTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$ServiceWorkerExperimentPerfTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1=babelHelpers['extends']({},this.$ServiceWorkerExperimentPerfTypedLogger1,j);return this;};h.prototype.setAppCache=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.app_cache=j;return this;};h.prototype.setBodyVisible=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.body_visible=j;return this;};h.prototype.setCsstart=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.csstart=j;return this;};h.prototype.setDisplayDone=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.display_done=j;return this;};h.prototype.setDns=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.dns=j;return this;};h.prototype.setDomComplete=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.dom_complete=j;return this;};h.prototype.setDomContentLoad=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.dom_content_load=j;return this;};h.prototype.setDomInteractiveLoad=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.dom_interactive_load=j;return this;};h.prototype.setDomSetup=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.dom_setup=j;return this;};h.prototype.setE2e=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.e2e=j;return this;};h.prototype.setExperimentEnabledType=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.experiment_enabled_type=j;return this;};h.prototype.setExperimentType=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.experiment_type=j;return this;};h.prototype.setFetchStartMs=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.fetch_start_ms=j;return this;};h.prototype.setFirstResponse=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.first_response=j;return this;};h.prototype.setHardwareConcurrency=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.hardware_concurrency=j;return this;};h.prototype.setIsSecondLoad=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.is_second_load=j;return this;};h.prototype.setIsSwFnrLoad=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.is_sw_fnr_load=j;return this;};h.prototype.setLastResponse=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.last_response=j;return this;};h.prototype.setLoadedViaSwCache=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.loaded_via_sw_cache=j;return this;};h.prototype.setNavStartMs=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.nav_start_ms=j;return this;};h.prototype.setRbbDisplayDone=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.rbb_display_done=j;return this;};h.prototype.setRedirect=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.redirect=j;return this;};h.prototype.setRequest=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.request=j;return this;};h.prototype.setRespond=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.respond=j;return this;};h.prototype.setSubstream0=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.substream_0=j;return this;};h.prototype.setSubstream1=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.substream_1=j;return this;};h.prototype.setTcp=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.tcp=j;return this;};h.prototype.setTti=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.tti=j;return this;};h.prototype.setUnload=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.unload=j;return this;};h.prototype.setVC=function(j){this.$ServiceWorkerExperimentPerfTypedLogger1.vc=j;return this;};var i={app_cache:true,body_visible:true,csstart:true,display_done:true,dns:true,dom_complete:true,dom_content_load:true,dom_interactive_load:true,dom_setup:true,e2e:true,experiment_enabled_type:true,experiment_type:true,fetch_start_ms:true,first_response:true,hardware_concurrency:true,is_second_load:true,is_sw_fnr_load:true,last_response:true,loaded_via_sw_cache:true,nav_start_ms:true,rbb_display_done:true,redirect:true,request:true,respond:true,substream_0:true,substream_1:true,tcp:true,tti:true,unload:true,vc:true};f.exports=h;}),null);
__d("pageLoadedViaSWExperiment",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){return self.__SW_QE_TYPE__;}f.exports=h;}),null);
__d('ReactBlueBarPerfLogger',['regeneratorRuntime','Arbiter','ArtillerySWDataCollector','BanzaiScuba','BanzaiServiceWorker','BigPipe','ClientChromeExperimentsData','LogBuffer','NavigationMetrics','PageletEventConstsJS','ServiceWorkerExperimentPerfTypedLogger','SubscriptionsHandler','pageLoadedViaSWCache','pageLoadedViaSWExperiment','performance'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='reactbluebar_perf',i='navigationStart',j='fetchStart',k='domainLookupStart',l='connectStart',m='connectEnd',n='responseStart',o='responseEnd',p='domLoading',q='domInteractive',r='domContentLoadedEventEnd',s='domComplete',t='unloadEventStart',u='unloadEventEnd',v={},w=function y(z){var aa,ba=this,ca,da,ea,fa,ga,ha;return c('regeneratorRuntime').async(function ia(ja){while(1)switch(ja.prev=ja.next){case 0:ca=new (c('BanzaiScuba'))(h,null,{addBrowserFields:true,addGeoFields:true,addPredictedGeographyFields:true,addRequestFields:true});da=c('pageLoadedViaSWExperiment')();if(!da&&z.experimentName==='control')da='control';ea=new (c('ServiceWorkerExperimentPerfTypedLogger'))();ea.setExperimentType(z.experimentName);ea.setExperimentEnabledType(da);ea.setIsSecondLoad(z.isSecondLoad);ea.setLoadedViaSwCache(c('pageLoadedViaSWCache')());fa=/sw_fnr_id=\d+&?/;ga=!!location.search&&fa.test(location.search);ea.setIsSwFnrLoad(ga);ca.addInteger('sw_fnr_load',ga?1:0);ca.addNormal('experiment_type',z.experimentName);ca.addNormal('experiment_enabled_type',da);ca.addNormal('page_client',z.page);ca.addNormal('response_type',c('pageLoadedViaSWCache')()?'sw':'server');ca.addNormal('second_load',z.isSecondLoad);ca.addNormal('temp_logger_type',c('BanzaiServiceWorker').isEnabled()?'background_sync':'normal');ha={};if(c('ClientChromeExperimentsData').shouldShowClientChrome)ha.client_chrome=1;ca.addTagset('gk_on',ha);if(navigator.hardwareConcurrency){ca.addInteger('hardwareConcurrency',navigator.hardwareConcurrency);ea.setHardwareConcurrency(navigator.hardwareConcurrency);}if(!c('performance').timing){ja.next=25;break;}ja.next=25;return c('regeneratorRuntime').awrap(function ka(){var la,ma,na,oa,pa,qa,ra,sa,ta,ua;return c('regeneratorRuntime').async(function va(wa){while(1)switch(wa.prev=wa.next){case 0:la=c('performance').timing;ma=la.navigationStart;na=la.fetchStart;ea.setFetchStartMs(na);ea.setNavStartMs(ma);ca.addInteger('tti',z.tti-na);ca.addInteger('e2e',z.e2e-na);ca.addInteger('display_done',z.displayDone-na);if(z.rbbDisplayDone)ca.addInteger('rbb_display_done',z.rbbDisplayDone-na);if(z.bodyVisible)ca.addInteger('body_visible',z.bodyVisible-na);if(typeof b._cstart==='number')ca.addInteger('cstart',b._cstart-na);wa.next=13;return c('regeneratorRuntime').awrap(c('ArtillerySWDataCollector').collect());case 13:oa=wa.sent;if(!oa){wa.next=27;break;}pa=oa.segments.filter(function(xa){return xa.description==='cached_header_response'||xa.description==='navigation_response';});qa=0;case 17:if(!(qa<pa.length)){wa.next=27;break;}ra=pa[qa].begin;sa=pa[qa].end;if(!(!ra||!sa)){wa.next=22;break;}return wa.abrupt('continue',24);case 22:ca.addInteger(pa[qa].description+'.begin',ra-ma);ca.addInteger(pa[qa].description+'.end',sa-ma);case 24:qa++;wa.next=17;break;case 27:ca.addInteger('tti_navs',z.tti-ma);ea.setTti(z.tti-ma);ca.addInteger('e2e_navs',z.e2e-ma);ea.setE2e(z.e2e-ma);ca.addInteger('display_done_navs',z.displayDone-ma);ea.setDisplayDone(z.displayDone-ma);if(z.rbbDisplayDone){ta=z.rbbDisplayDone;ca.addInteger('rbb_display_done_navs',ta-ma);ea.setRbbDisplayDone(ta-ma);}if(z.bodyVisible){ua=z.bodyVisible;ca.addInteger('body_visible_navs',ua-ma);ea.setBodyVisible(ua-ma);}if(typeof b._cstart==='number'){ca.addInteger('cstart_navs',b._cstart-ma);ea.setCsstart(b._cstart-ma);}Object.keys(v).forEach(function(xa){ca.addInteger('pagelet_arrive_'+xa,v[xa]-na);ca.addInteger('pagelet_arrive_'+xa+'_navs',v[xa]-ma);if(xa==='first_response'||xa==='last_response'||xa==='substream_0'||xa==='substream_1'){var ya={};ya[xa]=v[xa]-ma;ea.updateData(ya);}});[{name:'redirect',start:i,end:j},{name:'app_cache',start:j,end:k},{name:'dns',start:k,end:l},{name:'tcp',start:l,end:m},{name:'request',start:m,end:n},{name:'respond',start:n,end:o},{name:'dom_setup',start:n,end:p},{name:'dom_interactive_load',start:p,end:q},{name:'dom_content_load',start:q,end:r},{name:'dom_complete',start:r,end:s},{name:'unload',start:t,end:u}].forEach(function(xa){var ya=xa.name,za=xa.start,ab=xa.end,bb=c('performance').timing[za]||0,cb=c('performance').timing[ab]||0;if(cb>=bb){ca.addInteger('perf_timing_'+ya,cb-bb);var db={};db[ya]=cb-bb;ea.updateData(db);}});case 38:case 'end':return wa.stop();}},null,ba);}());case 25:ca.post();ea.log();case 27:case 'end':return ja.stop();}},null,this);},x={init:function y(z){var aa=z.isSecondLoad,ba=z.experimentName,ca=z.waitForRBB,da=null,ea=new (c('SubscriptionsHandler'))();ea.addSubscriptions(c('Arbiter').subscribe('sw/bodyVisible',function(fa,ga){var ha=ga.relativeTime;if(c('performance').timing)da=ha+c('performance').timing.navigationStart;}));ea.addSubscriptions(c('Arbiter').subscribe(c('BigPipe').Events.init,function(fa,ga){var ha=ga.arbiter,ia=ha.subscribe('pagelet_event',function(ja,ka){var event=ka.event,la=ka.id,ma=ka.ts;if(event!==c('PageletEventConstsJS').ARRIVE_START||typeof ma!=='number')return;var na=['first_response','last_response','pagelet_welcome_box','pagelet_dock','pagelet_navigation','pagelet_composer','substream_0','substream_1','pagelet_ego_pane','webgraphql_preloader_ReactBlueBarJewelsDataPreloader',{regex:/^topnews_main_stream_(\d+)$/,name:'topnews_main_stream'},{regex:/^hyperfeed_story_id_(\d+)$/,name:'hyperfeed_story'}],oa=null;for(var pa=na,qa=Array.isArray(pa),ra=0,pa=qa?pa:pa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var sa;if(qa){if(ra>=pa.length)break;sa=pa[ra++];}else{ra=pa.next();if(ra.done)break;sa=ra.value;}var ta=sa;if(typeof ta==='string'){if(ta===la){oa=ta;break;}}else if(ta.regex.test(la)){oa=ta.name;break;}}if(oa&&!v[oa])v[oa]=ma;});ea.addSubscriptions(ia);}));ea.addSubscriptions(c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.NAVIGATION_DONE,function(fa,ga){var ha=ga.page,ia=ga.pageType,ja=ga.tti,ka=ga.e2e,la=ga.all_pagelets_displayed;ia=ia||'normal';if(ia!=='normal')return;ea.release();var ma=function na(oa){var pa=oa.displayDone;w({bodyVisible:da,rbbDisplayDone:pa,displayDone:la,e2e:ka,page:ha,pageType:ia,tti:ja,isSecondLoad:aa,experimentName:ba});};if(ca){c('LogBuffer').tail('reactbluebar_perf',ma);}else ma({displayDone:null});}));}};f.exports=x;}),null);
__d('ServiceWorkerURLCleaner',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/sw_fnr_id=\d+&?/,i={removeRedirectID:function j(){if(location.search&&h.test(location.search))if(history!==undefined&&typeof history.replaceState==='function'){var k=location.toString().replace(h,'').replace(/\?$/,'');history.replaceState({},document.title,k);}}};f.exports=i;}),null);