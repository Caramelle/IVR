% to classify: run manualClassification(9)
% to change features, edit getfeatures.m
% to get input: run getInputVectors(nrfeatures,9)

theclasses=load('savedtags.mat');
theclasses=theclasses.tags;
input=load('savedinput.mat');
input=input.vec;

n=size(theclasses,2);
[training,testing]=dividerand(n,0.8,0.2);

trainIn=input(1:111,:);
trainOut=theclasses(1:111);

model=fitcnb(trainIn,trainOut, 'Prior', 'uniform');

testIn=input(111:125,:);
testOut=theclasses(111:125);
testOut=testOut(:);

predictions=predict(model,testIn);
disp(predictions)
disp(testOut);
gotRight=sum(cellfun(@strcmp,predictions,testOut));
accuracy=double(gotRight)/size(testIn,1);
disp(accuracy);

% model = fitcnb(input(1:111,:),theclasses(1:111), 'Prior','uniform');
% %model = mvnpdf(input, theclasses);
% % Calculate misclassification error
% cvmodel = crossval(model,'kfold',5);
% cvError = kfoldLoss(cvmodel);
% disp(1-cvError);
save('fittedbayes.mat','model');